<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <style>
        body{
              text-align: center;
             }

             #answer{
                 font-size:30px;
             }
    </style>
    <title>Document</title>
</head>

<body>
    <form>
        <label for="start">choose level:</label> <br>
        <input type="button" id="btn1" onclick="selectedLevel(event)" value="Easy">
        <input type="button" id="btn2" onclick="selectedLevel(event)" value="Medium">
        <input type="button" id="btn3" onclick="selectedLevel(event)" value="Hard">


        <br> <br>
    </form>

    <div id="SelectDiv"></div><br>
    <div id="answer"></div><br>
    <div id="indicate"></div>
    <div id="levelNow"></div>

    <script>
        var word = new RandomWord(['a', 'b', 'c']);
        var level;
        var correctString;
        var textArr = [];
        var answerWord = "";
        var indexChar;

        function selectedLevel(event) {
            switch (event.target.value) {
                case "Hard":
                    level = 7;
                    break;
                case "Medium":
                    level = 5;
                    break;
                case "Easy":
                    level = 3;
                    break;
            }
            ;
            NewGame();
        }

        function NewGame() {
            document.getElementById("levelNow").innerHTML = "Level :" + level;
            answerWord = "";
            indexChar = -1;
            document.getElementById("answer").innerText = "";
            document.getElementById("SelectDiv").innerHTML = "";
            console.log(word.randomize(level));
        }

        function RandomWord(charsArray) {
            if (typeof charsArray === 'object') {
                //this.result = randomize(charsArray); 
            }
            else { console.log('"chars" should be an array.'); }
            this.randomize = function (length) {
                if (typeof length === 'number') {
                    correctString = "";
                    var possible = charsArray.join("");
                    for (var i = 0; i < length; i++)
                        correctString += possible.charAt(Math.floor(Math.random() * possible.length));
                    createTextInList(correctString);
                    return correctString;
                }
                else console.log('"length" should be a number.');
            }
        }

        function createTextInList(text) {
            textArr = text.split('').sort();
            var selectListChar = document.createElement("select");
            document.getElementById("SelectDiv").appendChild(selectListChar);
            selectListChar.onchange = selectChar;
            var charOption = document.createElement("option");
            selectListChar.appendChild(charOption);
            for (var i = 0; i < level; i++) {
                var charOption = document.createElement("option");
                selectListChar.appendChild(charOption);
                charOption.value = textArr[i];
                charOption.innerText = textArr[i];
            }

        }
        function selectChar(event) {
            var char = event.target.value;
            answerWord += char;
            document.getElementById("answer").innerText += char;
            console.log(indexChar);
            indexChar++;
            checkWin(answerWord);
        }

        function checkWin() {
            //checkWin
            console.log(correctString);
            console.log(answerWord);
            console.log(indexChar);
            console.log(answerWord[indexChar]);

            console.log(correctString[indexChar]);

            if (correctString == answerWord) {
                if (level < 7) {
                    level = level + 2;
                    document.getElementById("indicate").innerHTML = "<h1>You WIN!</h1><h3>try level: " + level + "</h3>";
                    setTimeout(function () { document.getElementById("indicate").innerHTML = "" }, 2500);
                    NewGame();
                }
                else document.getElementById("indicate").innerHTML = "<h1>WIN all levels!!</h1>"
            }
            //checkWrong
            else
                if ((correctString[indexChar]) != (answerWord[indexChar])) {
                    document.getElementById("indicate").innerHTML = "<h1>Game Over</h1><h3>try again... </h3>";
                    setTimeout(function () { document.getElementById("indicate").innerHTML = "" }, 2500);
                    NewGame();
                }
        }



    </script>
</body>

</html>
